apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component

# NFS configuration for media applications
# Provides consistent NFS mount configuration for media apps
# Following the home-ops pattern
patches:
  - target:
      kind: HelmRelease
      labelSelector: "app.kubernetes.io/part-of=media-stack"
    patch: |
      - op: replace
        path: "/spec/values/persistence/media"
        value:
          type: nfs
          server: ${MEDIA_NFS_SERVER:?set MEDIA_NFS_SERVER}
          path: ${MEDIA_NFS_PATH:?set MEDIA_NFS_PATH}
          globalMounts:
            - path: /data
