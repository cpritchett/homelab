#!/usr/bin/env bash
set -euo pipefail

ROOT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"

# Order matters:
# - 00-proxy first (caddy)
# - then stacks that rely on proxy_network
STACKS=(
  "${ROOT_DIR}/stacks/00-proxy"
  "${ROOT_DIR}/stacks/20-harbor"
)

for s in "${STACKS[@]}"; do
  echo "== Deploying: ${s}"
  "${ROOT_DIR}/bin/deploy-stack" "${s}"
done
