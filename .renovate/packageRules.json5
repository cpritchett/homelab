{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  packageRules: [
    {
      description: "Custom file patterns for Flux manager",
      matchManagers: ["flux"],
      fileMatch: ["/kubernetes/.*\\.ya?ml$", "/bootstrap/.*\\.ya?ml$"]
    },
    {
      description: "Custom file patterns for Helm-values manager",
      matchManagers: ["helm-values"],
      fileMatch: ["/kubernetes/.*\\.ya?ml$", "/bootstrap/.*\\.ya?ml$"]
    },
    {
      description: "Custom file patterns for Kubernetes manager",
      matchManagers: ["kubernetes"],
      fileMatch: ["/kubernetes/.*\\.ya?ml$", "/bootstrap/.*\\.ya?ml$"]
    },
    {
      description: "Require approval for major updates",
      matchUpdateTypes: ["major"],
      dependencyDashboardApproval: true,
      minimumReleaseAge: "7 days"
    },
    {
      description: "Stable release age for minor updates",
      matchUpdateTypes: ["minor"],
      minimumReleaseAge: "3 days"
    },
    {
      description: "Quick patch updates",
      matchUpdateTypes: ["patch"],
      minimumReleaseAge: "1 day"
    },
    {
      description: "Container image digest updates",
      matchDatasources: ["docker"],
      matchUpdateTypes: ["digest"],
      semanticCommitScope: "docker",
      commitMessageTopic: "Docker digest {{depName}}",
      enabled: true,
      pinDigests: true,
      automerge: false
    },
    {
      description: "Helm chart updates",
      matchDatasources: ["helm"],
      semanticCommitScope: "helm",
      commitMessageTopic: "Helm chart {{depName}}",
      separateMinorPatch: true
    },
    {
      description: "GitHub Actions updates",
      matchManagers: ["github-actions"],
      semanticCommitScope: "ci",
      pinDigests: true,
      commitMessageTopic: "GitHub Action {{depName}}"
    },
    {
      description: "GitHub Releases - follow semantic versioning",
      matchDatasources: ["github-releases"],
      semanticCommitScope: "deps",
      commitMessageTopic: "{{depName}}",
      separateMinorPatch: true,
      extractVersion: "^v?(?<version>.*)$"
    },
    {
      description: "Docker images - enable digest pinning",
      matchDatasources: ["docker"],
      semanticCommitScope: "docker",
      commitMessageTopic: "Docker image {{depName}}",
      pinDigests: true,
      separateMinorPatch: false
    },
    {
      description: "Development dependencies - lower priority",
      matchDepTypes: ["devDependencies"],
      semanticCommitScope: "dev-deps",
      commitMessageTopic: "dev dependency {{depName}}",
      prPriority: -1,
      automerge: true,
      automergeType: "branch"
    },
    {
      description: "Production dependencies - higher priority",
      matchDepTypes: ["dependencies"],
      semanticCommitScope: "deps",
      commitMessageTopic: "dependency {{depName}}",
      prPriority: 5
    },
    {
      description: "Tool binaries from mise.toml",
      matchFileNames: [".mise.toml"],
      commitMessageTopic: "tool {{depName}}",
      semanticCommitScope: "tools"
    },
    {
      description: "Disable updates for local dependencies",
      matchPackageNames: ["/^file:/"],
      enabled: false
    },
    {
      description: "Increase stability period for critical infrastructure",
      matchPackageNames: ["/cilium/", "/cert-manager/", "/external-secrets/"],
      matchUpdateTypes: ["major"],
      minimumReleaseAge: "14 days",
      dependencyDashboardApproval: true
    },
    {
      description: "Disable updates for qbr - repository not publicly accessible",
      matchPackageNames: ["ghcr.io/buroa/qbr"],
      enabled: false
    }
  ]
}
