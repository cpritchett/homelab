---
# devsec.hardening overrides for homelab compatibility
os_auth_pw_max_age: 99999          # No password expiry (key-only auth)
os_auth_retries: 3
sshd_authenticationmethods: publickey

# Don't disable IPv6 â€” Docker Swarm uses it internally
os_hardening_ipv6_disable: false

# Allow Docker to manage iptables
sysctl_overwrite:
  net.ipv4.ip_forward: 1            # Required for Docker routing
  net.bridge.bridge-nf-call-iptables: 1

# SSH hardening
ssh_permit_root_login: "no"
ssh_password_authentication: "no"
ssh_allow_users: "deploy"
ssh_max_auth_retries: 3

# Firewall ports to allow
firewall_allowed_tcp_ports:
  - 22     # SSH
  - 8120   # Periphery
  - 2377   # Docker Swarm management
  - 7946   # Docker Swarm node communication
firewall_allowed_udp_ports:
  - 7946   # Docker Swarm node communication
  - 4789   # Docker Swarm overlay network (VXLAN)
