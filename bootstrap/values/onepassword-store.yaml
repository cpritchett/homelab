---
# Deploy 1Password Connect via bjw-s app-template
controller:
  type: deployment
  replicas: 1
image:
  repository: 1password/connect-api
  tag: 1.7.3
service:
  main:
    ports:
      http:
        port: 8080
env:
  # URL used by ClusterSecretStore; keep service DNS stable
  - name: OP_CONNECT_HOST
    value: http://onepassword.external-secrets.svc.cluster.local
  - name: OP_SESSION
    valueFrom:
      secretKeyRef:
        name: onepassword-secret
        key: token
  - name: OP_CREDENTIALS
    valueFrom:
      secretKeyRef:
        name: onepassword-secret
        key: 1password-credentials.json
resources:
  requests:
    cpu: 100m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 512Mi
ingress:
  main:
    enabled: false
persistence:
  data:
    enabled: false
podDisruptionBudget:
  enabled: false
serviceMonitor:
  enabled: false
# Set to true when ready to install (values consumed by helmfile)
installed: false
