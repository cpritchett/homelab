###############################################################################
# Recyclarr — TRaSH Guides Quality Profile Sync
#
# Radarr:  SQP-1 WEB (2160p) + SQP-4 MA Hybrid + SQP-1 (1080p) + Anime
# Sonarr:  WEB-2160p + WEB-1080p + Anime
#
# Quality Definition: Streaming (Radarr), Series (Sonarr)
# HDR: DV + HDR10+ boost enabled
# Audio: Lossless preferred (TrueHD Atmos, DTS-X, DTS-HD MA via SQP scoring)
#
# NOTE: This is the version-controlled reference config. The runtime copy
# lives at /mnt/apps01/appdata/media/recyclarr/config/recyclarr.yml on the
# host (mounted into the container at /config). API keys use !env_var syntax
# here; the host copy contains actual values.
###############################################################################

radarr:
  radarr:
    base_url: http://radarr:7878
    api_key: !env_var RADARR_API_KEY

    include:
      # Quality Definition (one per instance — streaming-optimized sizes)
      - template: radarr-quality-definition-sqp-streaming

      # 4K profile: SQP-1 WEB (2160p) — WEB + Bluray, streaming file sizes
      - template: radarr-quality-profile-sqp-1-web-2160p
      - template: radarr-custom-formats-sqp-1-web-2160p

      # 4K WEB-only profile: SQP-4 MA Hybrid (WEB + hybrid scoring)
      - template: radarr-quality-profile-sqp-4
      - template: radarr-custom-formats-sqp-4

      # 1080p profile: SQP-1 (Bluray + WEB)
      - template: radarr-quality-profile-sqp-1-1080p
      - template: radarr-custom-formats-sqp-1-1080p

      # Anime profile
      - template: radarr-quality-profile-anime
      - template: radarr-custom-formats-anime

    # Override SQP-4 score set to MA Hybrid variant
    quality_profiles:
      - name: SQP-4
        score_set: sqp-4-ma-hybrid

    # Enable optional CFs (commented out in SQP defaults)
    custom_formats:
      # Hybrid releases (WEB video + Remux audio = best of both)
      - trash_ids:
          - 0f12c086e289cf966fa5948eac571f44  # Hybrid
        assign_scores_to:
          - name: SQP-4
      # DV and HDR10+ preference
      - trash_ids:
          - b337d6812e06c200ec9a2d3cfa9d20a7  # DV (Boost)
        assign_scores_to:
          - name: SQP-1 WEB (2160p)
            score: 1000
          - name: SQP-4
            score: 1000
      - trash_ids:
          - caa37d0df9c348912df1fb1d88f9273a  # HDR10+ Boost
        assign_scores_to:
          - name: SQP-1 WEB (2160p)
            score: 100
          - name: SQP-4
            score: 100

sonarr:
  sonarr:
    base_url: http://sonarr:8989
    api_key: !env_var SONARR_API_KEY

    include:
      # Quality Definition (one per instance)
      - template: sonarr-quality-definition-series

      # 4K profile: WEB-2160p
      - template: sonarr-v4-quality-profile-web-2160p
      - template: sonarr-v4-custom-formats-web-2160p

      # 1080p profile: WEB-1080p
      - template: sonarr-v4-quality-profile-web-1080p
      - template: sonarr-v4-custom-formats-web-1080p

      # Anime profile
      - template: sonarr-v4-quality-profile-anime
      - template: sonarr-v4-custom-formats-anime
